"use strict";var View={listDay:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],listMonth:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],buttonFastAdd:document.getElementById("btn-fast-add"),pupopFastAdd:document.getElementById("popup-fast-add"),inputFastAdd:document.getElementById("pfa-input"),statusFastAdd:document.getElementById("pfa-status"),buttonSubmitFastAdd:document.getElementById("pfa-btn-submit"),buttonCancelFastAdd:document.getElementById("pfa-btn-canсel"),buttonCloseFastAdd:document.getElementById("pfa-btn-close"),buttonUpdate:document.getElementById("btn-update"),inputSerach:document.getElementById("input-search"),buttonEarlier:document.getElementById("btn-earlier"),buttonLater:document.getElementById("btn-later"),buttonCurrent:document.getElementById("btn-current"),buttonMonth:document.getElementById("btn-month"),pupopMonth:document.getElementById("popup-month"),listPupopMonth:document.getElementsByClassName("pm-item"),buttonYear:document.getElementById("btn-year"),pupopYear:document.getElementById("popup-year"),listPupopYear:document.getElementsByClassName("py-item"),calendar:document.getElementById("calendar"),showConsole:function(t){console.log(t)},createDivWithClass:function(t){var e=document.createElement("div");return e.classList.add(t),e},changeLableMonth:function(){this.buttonMonth.innerHTML=this.listMonth[Model.date.getMonth()]},createItemsMonth:function(){for(var t=0;t<this.listMonth.length;t++){var e=this.createDivWithClass("pm-item");e.setAttribute("id","pm-item"),e.innerHTML=this.listMonth[t],this.pupopMonth.appendChild(e)}},markItemMonth:function(){for(var t=0;t<this.listPupopMonth.length;t++)this.listPupopMonth[t].classList.remove("active");this.listPupopMonth[Model.date.getMonth()].classList.add("active")},changeLableYear:function(){this.buttonYear.innerHTML=Model.date.getFullYear()},createItemsYear:function(){for(var t=Model.getListYear(),e=0;e<t.length;e++){var n=this.createDivWithClass("py-item");n.setAttribute("id","py-item"),n.innerHTML=t[e],this.pupopYear.appendChild(n)}},markItemYear:function(){for(var t=0;t<this.listPupopYear.length;t++)this.listPupopYear[t].innerHTML==Model.date.getFullYear()?this.listPupopYear[t].classList.add("active"):this.listPupopYear[t].classList.remove("active")},showSelectedMonth:function(){var t=Model.getDaysCurrentMonth(),e=t.length/7,n=0,a=t[17][1];this.calendar.innerHTML="";for(var i=0;i<e;i++){for(var o=this.createDivWithClass("row"),s=0;s<7;s++){var r=this.createDivWithClass("col");t[n][1]!=a&&r.classList.add("unfit"),Model.ifToday(t[n])&&r.classList.add("current");var l=this.createDivWithClass("col-date");l.innerHTML=0==i?this.listDay[s]+", "+t[n][2]:t[n][2],r.appendChild(l),r.setAttribute("date-index",Model.getIndexDate(t[n])),o.appendChild(r),n++}this.calendar.appendChild(o)}},showStatusFastAdd:function(t,e){this.statusFastAdd.className="status",this.statusFastAdd.classList.add(t),this.statusFastAdd.innerHTML=e}},Model={date:new Date,ifToday:function(t){var e=new Date,n=e.getFullYear(),a=e.getMonth(),i=e.getDate();return t[0]==n&&t[1]==a&&t[2]==i},refresh:function(){View.changeLableMonth(),View.createItemsMonth(),View.markItemMonth(),View.changeLableYear(),View.showSelectedMonth()},setCurrentDate:function(){this.date=new Date},setSelectedMonth:function(t){this.date.setMonth(t)},setSelectedYear:function(t){this.date.setFullYear(t)},setEarlierMonth:function(){this.date.setMonth(this.date.getMonth()-1)},setLaterMonth:function(){this.date.setMonth(this.date.getMonth()+1)},getDaysCurrentMonth:function(){var t=[],e=this.date.getMonth(),n=new Date;n.setFullYear(this.date.getFullYear(),e,1);var a=0==n.getDay()?7:n.getDay();n.setDate(n.getDate()-a+1);for(i=0;i<7;i++)t.push([n.getFullYear(),n.getMonth(),n.getDate()]),n.setDate(n.getDate()+1);for(;n.getMonth()==e;)for(var i=0;i<7;i++)t.push([n.getFullYear(),n.getMonth(),n.getDate()]),n.setDate(n.getDate()+1);return t},getIndexDate:function(t){var e=1==(""+t[1]).length?"0"+(t[1]+1):t[1]+1,n=1==(""+t[2]).length?"0"+t[2]:t[2];return[t[0],e,n].join("")},getDateIndex:function(t){var e=[];return e.push(+t.slice(0,4)),e.push(+("0"==t[4]?t[5]:t.slice(4,6))-1),e.push(+("0"==t[6]?t[7]:t.slice(6))),e},getListYear:function(){for(var t=[],e=+this.date.getFullYear()-20;e<+this.date.getFullYear()+50;e++)t.push(e);return t}},Controller={clickButtonEarlier:function(){Model.setEarlierMonth(),View.changeLableMonth(),View.markItemMonth(),View.changeLableYear(),View.markItemYear(),View.showSelectedMonth()},clickButtonLater:function(){Model.setLaterMonth(),View.changeLableMonth(),View.markItemMonth(),View.changeLableYear(),View.markItemYear(),View.showSelectedMonth()},clickButtonCurrent:function(){Model.setCurrentDate(),View.changeLableMonth(),View.markItemMonth(),View.changeLableYear(),View.markItemYear(),View.showSelectedMonth()},clickButtonMonth:function(t){t.target==View.buttonMonth&&View.pupopMonth.classList.toggle("active"),t.target!=View.buttonMonth&&View.pupopMonth.classList.contains("active")&&View.pupopMonth.classList.remove("active")},clickItemMonth:function(t){var e=View.listMonth.indexOf(t.target.innerHTML);Model.setSelectedMonth(e),View.changeLableMonth(),View.markItemMonth(),View.showSelectedMonth()},clickButtonYear:function(t){t.target==View.buttonYear&&View.pupopYear.classList.toggle("active"),t.target!=View.buttonYear&&View.pupopYear.classList.contains("active")&&View.pupopYear.classList.remove("active")},clickItemYear:function(t){Model.setSelectedYear(t.target.innerHTML),View.changeLableYear(),View.markItemYear(),View.showSelectedMonth()},clickButtonFastAdd:function(){View.pupopFastAdd.classList.toggle("active")},clickButtonCloseFastAdd:function(){View.pupopFastAdd.classList.remove("active"),View.statusFastAdd.innerHTML=""},clickButtonCancelFastAdd:function(){View.pupopFastAdd.classList.remove("active"),View.inputFastAdd.value="",View.statusFastAdd.innerHTML=""},clickButtonSumbitFastAdd:function(){""==View.inputFastAdd.value?View.showStatusFastAdd("error","Заполните поле"):(View.showStatusFastAdd("succses","Данные добавлены"),View.inputFastAdd.value="")}};({init:function(){Model.setCurrentDate(),View.changeLableMonth(),View.createItemsMonth(),View.markItemMonth(),View.changeLableYear(),View.createItemsYear(),View.markItemYear(),View.showSelectedMonth(),this.main(),this.event()},main:function(){},event:function(){View.buttonFastAdd.addEventListener("click",Controller.clickButtonFastAdd),View.buttonCloseFastAdd.addEventListener("click",Controller.clickButtonCloseFastAdd),View.buttonCancelFastAdd.addEventListener("click",Controller.clickButtonCancelFastAdd),View.buttonSubmitFastAdd.addEventListener("click",Controller.clickButtonSumbitFastAdd),View.buttonEarlier.addEventListener("click",Controller.clickButtonEarlier),View.buttonLater.addEventListener("click",Controller.clickButtonLater),View.buttonCurrent.addEventListener("click",Controller.clickButtonCurrent),window.addEventListener("click",function(t){Controller.clickButtonMonth(t)});for(t=0;t<View.listPupopMonth.length;t++)View.listPupopMonth[t].addEventListener("click",function(t){Controller.clickItemMonth(t)});window.addEventListener("click",function(t){Controller.clickButtonYear(t)});for(var t=0;t<View.listPupopYear.length;t++)View.listPupopYear[t].addEventListener("click",function(t){Controller.clickItemYear(t)})}}).init();